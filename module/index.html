<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>uniapp开发准备 | 寒梦的博客</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/blog/logo.png">
    <meta name="description" content="盛年不重来,一日难再晨,及时当勉励,岁月不待人">
    
    <link rel="preload" href="/blog/assets/css/0.styles.d63c41c6.css" as="style"><link rel="preload" href="/blog/assets/js/app.1737f577.js" as="script"><link rel="preload" href="/blog/assets/js/2.a89a0639.js" as="script"><link rel="preload" href="/blog/assets/js/9.cd2a009c.js" as="script"><link rel="prefetch" href="/blog/assets/js/3.496ed1cd.js"><link rel="prefetch" href="/blog/assets/js/4.80c8e440.js"><link rel="prefetch" href="/blog/assets/js/5.d57e580b.js"><link rel="prefetch" href="/blog/assets/js/6.877325c0.js"><link rel="prefetch" href="/blog/assets/js/7.9f88f90e.js"><link rel="prefetch" href="/blog/assets/js/8.8d7987a6.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.d63c41c6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">寒梦的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="移动团队二部" class="dropdown-title"><span class="title">移动团队二部</span> <span class="arrow down"></span></button> <button type="button" aria-label="移动团队二部" class="mobile-dropdown-title"><span class="title">移动团队二部</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/module/index.html" class="nav-link">
  验证模块
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="移动团队二部" class="dropdown-title"><span class="title">移动团队二部</span> <span class="arrow down"></span></button> <button type="button" aria-label="移动团队二部" class="mobile-dropdown-title"><span class="title">移动团队二部</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/module/index.html" class="nav-link">
  验证模块
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>uniapp开发准备</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/module/#uniapp开发准备" class="sidebar-link">uniapp开发准备</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/module/#_1-ide工具安装" class="sidebar-link">1. ide工具安装</a></li></ul></li><li><a href="/blog/module/#uniapp和vue的异同点" class="sidebar-link">uniapp和vue的异同点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/module/#_1-组件-标签的变化" class="sidebar-link">1. 组件/标签的变化</a></li><li class="sidebar-sub-header"><a href="/blog/module/#_2-新增了手机端常用的新组件" class="sidebar-link">2. 新增了手机端常用的新组件</a></li><li class="sidebar-sub-header"><a href="/blog/module/#_3-和浏览器的js-api的不同" class="sidebar-link">3. 和浏览器的js api的不同</a></li><li class="sidebar-sub-header"><a href="/blog/module/#_4-uniapp自带路由和请求方式" class="sidebar-link">4. uniapp自带路由和请求方式</a></li><li class="sidebar-sub-header"><a href="/blog/module/#_5-uniapp中增加的钩子函数" class="sidebar-link">5. uniapp中增加的钩子函数</a></li><li class="sidebar-sub-header"><a href="/blog/module/#_6-upx-rpx-px" class="sidebar-link">6. upx rpx px</a></li><li class="sidebar-sub-header"><a href="/blog/module/#相同点" class="sidebar-link">相同点</a></li></ul></li><li><a href="/blog/module/#通用api封装" class="sidebar-link">通用API封装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/module/#_1-弹窗api" class="sidebar-link">1. 弹窗API</a></li><li class="sidebar-sub-header"><a href="/blog/module/#_2-请求api" class="sidebar-link">2. 请求API</a></li></ul></li><li><a href="/blog/module/#常见的业务场景" class="sidebar-link">常见的业务场景</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/module/#_1-列表页面" class="sidebar-link">1. 列表页面</a></li><li class="sidebar-sub-header"><a href="/blog/module/#_2-跨页面方法调用" class="sidebar-link">2. 跨页面方法调用</a></li><li class="sidebar-sub-header"><a href="/blog/module/#_3-常用api" class="sidebar-link">3. 常用API</a></li><li class="sidebar-sub-header"><a href="/blog/module/#_4-默认使用高德导航app进行路线导航" class="sidebar-link">4. 默认使用高德导航APP进行路线导航</a></li><li class="sidebar-sub-header"><a href="/blog/module/#_6-和原生交互" class="sidebar-link">6. 和原生交互</a></li></ul></li><li><a href="/blog/module/#兼容性问题" class="sidebar-link">兼容性问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/module/#_1-uni-chooseimage" class="sidebar-link">1. uni.chooseImage</a></li></ul></li><li><a href="/blog/module/#真机或者模拟器运行" class="sidebar-link">真机或者模拟器运行</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/module/#连接安卓手机" class="sidebar-link">连接安卓手机</a></li><li class="sidebar-sub-header"><a href="/blog/module/#连接ios手机" class="sidebar-link">连接ios手机</a></li><li class="sidebar-sub-header"><a href="/blog/module/#夜神模拟器" class="sidebar-link">夜神模拟器</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="uniapp开发准备"><a href="#uniapp开发准备" class="header-anchor">#</a> uniapp开发准备</h2> <h3 id="_1-ide工具安装"><a href="#_1-ide工具安装" class="header-anchor">#</a> 1. ide工具安装</h3> <p><a href="https://www.dcloud.io/hbuilderx.html" target="_blank" rel="noopener noreferrer">HbuilderX开发工具<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="uniapp和vue的异同点"><a href="#uniapp和vue的异同点" class="header-anchor">#</a> uniapp和vue的异同点</h2> <h3 id="_1-组件-标签的变化"><a href="#_1-组件-标签的变化" class="header-anchor">#</a> 1. 组件/标签的变化</h3> <ul><li>p 改成 view</li> <li>span、font 改成 text</li> <li>a 改成 navigator</li> <li>img 改成 image</li> <li>input 还在，但type属性改成了confirmtype</li> <li>form、button、checkbox、radio、label、textarea、canvas、video 这些还在。</li> <li>select 改成 picker</li> <li>iframe 改成 web-view</li> <li>ul、li没有了，都用view替代</li> <li>audio 不再推荐使用，改成api方式，背景音频api文档</li></ul> <p><strong>虽然老的HTML标签也可以在uni-app里使用，uni-app编译器会在编译时把老标签转为新标签，比如把p编译成view。但不推荐这种用法，调试H5端时容易混乱。</strong></p> <h3 id="_2-新增了手机端常用的新组件"><a href="#_2-新增了手机端常用的新组件" class="header-anchor">#</a> 2. 新增了手机端常用的新组件</h3> <ul><li>scroll-view 可区域滚动视图容器</li> <li>swiper 可滑动区域视图容器</li> <li>icon 图标</li> <li>rich-text 富文本（不可执行js，但可渲染各种文字格式和图片）</li> <li>progress 进度条</li> <li>slider 滑块指示器</li> <li>switch 开关选择器</li> <li>camera 相机</li> <li>live-player 直播</li> <li>map 地图</li> <li>cover-view 可覆盖原生组件的视图容器</li></ul> <blockquote><p>cover-view 注意事项</p></blockquote> <p>uni-app的非h5的video、map、canvas、textarea是原生组件，层级高于其他组件。如需覆盖原生组件，比如在map上加个遮罩，则需要使用cover-view组件</p> <h3 id="_3-和浏览器的js-api的不同"><a href="#_3-和浏览器的js-api的不同" class="header-anchor">#</a> 3. 和浏览器的js api的不同</h3> <ul><li>alert,confirm 改成 uni.showToast, uni.showModel</li> <li>ajax axios 改成 uni.request</li> <li>cookie、session 没有了，local.storage 改成 uni.storage</li> <li>vue-router没有了，改成了 uni.navigateTo</li></ul> <h3 id="_4-uniapp自带路由和请求方式"><a href="#_4-uniapp自带路由和请求方式" class="header-anchor">#</a> 4. uniapp自带路由和请求方式</h3> <ul><li>uni.navigateTo 路由与页面跳转</li> <li>uni.request 网络请求</li></ul> <h3 id="_5-uniapp中增加的钩子函数"><a href="#_5-uniapp中增加的钩子函数" class="header-anchor">#</a> 5. uniapp中增加的钩子函数</h3> <ul><li>onReady()</li> <li>onShow()</li> <li>onHide()</li></ul> <h3 id="_6-upx-rpx-px"><a href="#_6-upx-rpx-px" class="header-anchor">#</a> 6. upx rpx px</h3> <p>upx rpx 响应式单位</p> <p>当需要某元素的单位要根据屏幕宽度（小范围）大小变化时，才需要rpx这类动态宽度单位。</p> <h3 id="相同点"><a href="#相同点" class="header-anchor">#</a> <strong>相同点</strong></h3> <ol><li><p>uni-app中可以使用 created、mounted、beforeDestroy 等钩子函数</p></li> <li><p>可以使用vue中的options API</p></li></ol> <h2 id="通用api封装"><a href="#通用api封装" class="header-anchor">#</a> 通用API封装</h2> <p><strong>实际开发中频繁使用到的操作, 我们可以封装成一些通用的插件</strong></p> <h3 id="_1-弹窗api"><a href="#_1-弹窗api" class="header-anchor">#</a> 1. 弹窗API</h3> <p>uni-app 提供的API有 <code>uni.showToast</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 示例1</span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">$showToast</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">msg<span class="token punctuation">,</span> image</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">title</span><span class="token operator">:</span> msg<span class="token punctuation">,</span>
		<span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'none'</span><span class="token punctuation">,</span>
		<span class="token literal-property property">image</span><span class="token operator">:</span> image <span class="token operator">?</span> image <span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 示例2</span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">$toast</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>title<span class="token punctuation">,</span> icon <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		title<span class="token punctuation">,</span>
		icon
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$toast</span><span class="token punctuation">(</span><span class="token string">'保存成功'</span><span class="token punctuation">,</span> <span class="token string">'success'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_2-请求api"><a href="#_2-请求api" class="header-anchor">#</a> 2. 请求API</h3> <ol><li>基于 <code>uni.request(OBJECT)</code> 进行封装</li> <li>定义一个对象 或者 类，方便导出使用</li> <li>定义一个封装请求的方法</li> <li>接收一个对象，包含url,method,header, data,success callback, error callback 等属性</li> <li>调用 uni.request</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token function-variable function">_request</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">let</span> _params <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
		_params<span class="token punctuation">.</span>url <span class="token operator">=</span> params<span class="token punctuation">.</span>url
		_params<span class="token punctuation">.</span>header <span class="token operator">=</span> params<span class="token punctuation">.</span>header
		_params<span class="token punctuation">.</span>data <span class="token operator">=</span> params<span class="token punctuation">.</span>data
		_params<span class="token punctuation">.</span>method <span class="token operator">=</span> params<span class="token punctuation">.</span>method
		_params<span class="token punctuation">.</span>success <span class="token operator">=</span> params<span class="token punctuation">.</span>success
		_params<span class="token punctuation">.</span>fail <span class="token operator">=</span> params<span class="token punctuation">.</span>fail

		uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">url</span><span class="token operator">:</span> _params<span class="token punctuation">.</span>finalUrl<span class="token punctuation">,</span>
			<span class="token literal-property property">data</span><span class="token operator">:</span> _params<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
			<span class="token literal-property property">header</span><span class="token operator">:</span> _params<span class="token punctuation">.</span>header<span class="token punctuation">,</span>
			<span class="token literal-property property">method</span><span class="token operator">:</span> _params<span class="token punctuation">.</span>method<span class="token punctuation">,</span>
			<span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">fail</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function-variable function">compelete</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="常见的业务场景"><a href="#常见的业务场景" class="header-anchor">#</a> 常见的业务场景</h2> <h3 id="_1-列表页面"><a href="#_1-列表页面" class="header-anchor">#</a> 1. 列表页面</h3> <p>列表页面一般包含如下功能：</p> <p>下拉刷新，上滑加载，没有更多内容的提示，关键字搜索，标签栏匹配，空白页面，列表项组件</p> <p>项目中一般都需要复用这些组件</p> <p>一般把scroll-view 、搜索框、空白页面、列表项抽成一个个组件</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>search-bar</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>search<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">'</span>#F7F7F7'<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@onSearch</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onSearch<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showSearch<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{marginBottom:singleList?'20upx':'0upx'}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:hint</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>searchHint<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>search-bar</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>custom-scroll-view</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scrollView<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">@onRefresh</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onRefresh<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@onLoadMore</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onLoadMore<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:enableScroll</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>enableScroll<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>items &amp;&amp; items.length<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transportation-task-item</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item,index in items<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:item</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">margin-bottom</span><span class="token punctuation">:</span> 29.17upx<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transportation-task-item</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>flex column flex-start height100 width100<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-else</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>empty</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>暂无数据<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>custom-scroll-view</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>CustomScrollView 组件</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scroll-view</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name">:scroll-y</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>enableScroll<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:refresher-triggered</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>triggered<span class="token punctuation">&quot;</span></span>
		<span class="token attr-name">:refresher-enabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>enableScroll<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:refresher-threshold</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@refresherpulling</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onPulling<span class="token punctuation">&quot;</span></span>
		<span class="token attr-name">refresher-default-style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>white<span class="token punctuation">&quot;</span></span> <span class="token attr-name">refresher-background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#00000000<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@refresherrefresh</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onRefreshInner<span class="token punctuation">&quot;</span></span>
		<span class="token attr-name">@refresherrestore</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onRestore<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@scroll</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scroll<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:scroll-top</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scrollTop<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@refresherabort</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onAbort<span class="token punctuation">&quot;</span></span>
		<span class="token attr-name">@scrolltolower</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scrolltolower<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>custom_scroll_root flex column flex-start<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>slot</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>visiable<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>slot</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>uni-load-more</span> <span class="token attr-name">:status</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>status<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:showIcon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">iconType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>auto<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loadMore<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:contentText</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>contentText<span class="token punctuation">&quot;</span></span>
			<span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>!hideBottomText<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>uni-load-more</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>scroll-view使用注意，要设置好高度, 垂直方向可滑动</p> <h3 id="_2-跨页面方法调用"><a href="#_2-跨页面方法调用" class="header-anchor">#</a> 2. 跨页面方法调用</h3> <p>点击搜索，跳转到搜索页面后，点击搜索，我们需要刷新当前页面，这个时候我们就需要一个在当前页面调用上一个页面的方法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">searchFunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> pages <span class="token operator">=</span> <span class="token function">getCurrentPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> page <span class="token operator">=</span> pages<span class="token punctuation">[</span>pages<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">]</span>
  page<span class="token punctuation">.</span>$vm<span class="token punctuation">.</span>searchText <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>search<span class="token punctuation">.</span>text
  page<span class="token punctuation">.</span>$vm<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>router<span class="token punctuation">.</span><span class="token function">back</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>getCurrentPages()</code> 是一个全局函数，用于获取当前页面栈的实例，以数组形式按栈的顺序给出。我们当前页面就是数组最后一项，那么上一个页面就是<code>pages[pages.length - 2]</code>。当然我们还要记得加上<code>$vm</code>属性，因为在uniapp中我们的数据和方法是挂载这个实例上的。我们可以通过这个示例访问到对应页面的所有数据和方法！</p> <h3 id="_3-常用api"><a href="#_3-常用api" class="header-anchor">#</a> 3. 常用API</h3> <ul><li><p>uni-popup  弹出层  可以定义弹出位置，可用于弹出日期弹出框</p></li> <li><p>picker-view  嵌入页面的滚动选择器, 类似于select 选择</p></li></ul> <h3 id="_4-默认使用高德导航app进行路线导航"><a href="#_4-默认使用高德导航app进行路线导航" class="header-anchor">#</a> 4. 默认使用高德导航APP进行路线导航</h3> <p>IOS端 uni.openLocation, 默认调用苹果自带Apple地图，怎么默认百度、高德等地图导航</p> <p>需要注意：</p> <ol><li>iOS上获取本机是否安装了百度高德地图，需要在manifest里配置，在manifest.json文件app-plus-&gt;distribute-&gt;ios-urlschemewhitelist节点下添加 &quot;iosamap&quot;</li></ol> <p><strong>注意：宿主APP 也要设置百度、高德地图的白名单(才能成功跳转第三方应用)</strong></p> <ol start="2"><li>如果还需要百度地图，和腾讯地图等，则添加对应的类型，baidumap,qqmap</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 导航</span>
<span class="token function">navigationTo</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">//打开第三方地图</span>
	<span class="token keyword">const</span> latitude <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>latitude<span class="token punctuation">)</span>
	<span class="token keyword">const</span> longitude <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>longitude<span class="token punctuation">)</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>plus<span class="token punctuation">.</span>os<span class="token punctuation">.</span>name <span class="token operator">==</span> <span class="token string">'Android'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		uni<span class="token punctuation">.</span><span class="token function">openLocation</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">latitude</span><span class="token operator">:</span> latitude<span class="token punctuation">,</span>
			<span class="token literal-property property">longitude</span><span class="token operator">:</span> longitude<span class="token punctuation">,</span>
			<span class="token literal-property property">name</span><span class="token operator">:</span> item<span class="token punctuation">.</span>siteDetail<span class="token punctuation">,</span>
			<span class="token literal-property property">scale</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
			<span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'success'</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// ios默认打开高德地图</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">iosOpenMap</span><span class="token punctuation">(</span>latitude<span class="token punctuation">,</span> longitude<span class="token punctuation">,</span> item<span class="token punctuation">.</span>siteDetail<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">iosOpenMap</span><span class="token punctuation">(</span><span class="token parameter">latitude<span class="token punctuation">,</span> longitude<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token string">''</span>
	plus<span class="token punctuation">.</span>nativeUI<span class="token punctuation">.</span><span class="token function">actionSheet</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;选择地图应用&quot;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">cancel</span><span class="token operator">:</span> <span class="token string">&quot;取消&quot;</span><span class="token punctuation">,</span>
		<span class="token literal-property property">buttons</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
			<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;高德地图&quot;</span>
		<span class="token punctuation">}</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">switch</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>index<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
				url <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">iosamap://viewMap?sourceApplication=applicationName&amp;poiname=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;lat=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>latitude<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;lon=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>longitude<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;dev=0</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>
			<span class="token keyword">default</span><span class="token operator">:</span>
				<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>url <span class="token operator">!=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			url <span class="token operator">=</span> <span class="token function">encodeURI</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
			plus<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span><span class="token function">openURL</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				plus<span class="token punctuation">.</span>nativeUI<span class="token punctuation">.</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;本机未安装指定的地图应用&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_6-和原生交互"><a href="#_6-和原生交互" class="header-anchor">#</a> 6. 和原生交互</h3> <p>uni.sendNativeEvent(event,callback)</p> <h4 id="参考"><a href="#参考" class="header-anchor">#</a> <a href="https://www.bookstack.cn/read/uni-sdk-202005/b60dd0b57f80cea7.md" target="_blank" rel="noopener noreferrer">参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h4> <h2 id="兼容性问题"><a href="#兼容性问题" class="header-anchor">#</a> 兼容性问题</h2> <h3 id="_1-uni-chooseimage"><a href="#_1-uni-chooseimage" class="header-anchor">#</a> 1. uni.chooseImage</h3> <p><strong>部分安卓手机机型无法调起相机，无法拍照</strong></p> <p>采用Android 原生拍照功能</p> <h2 id="真机或者模拟器运行"><a href="#真机或者模拟器运行" class="header-anchor">#</a> 真机或者模拟器运行</h2> <p><strong>经常会遇到的问题就是 <code>HBuilder X 未检测到手机或模拟器</code></strong></p> <blockquote><p>详见下面的参考链接去操作</p></blockquote> <h3 id="连接安卓手机"><a href="#连接安卓手机" class="header-anchor">#</a> 连接安卓手机</h3> <ol><li><p>使用usb 将手机连接到电脑上</p></li> <li><p>需要将手机上的开发者权限打开</p></li></ol> <p>如何找到手机里的开发者选项？ 设置-关于手机-版本号-连续点击版本号(会弹出你已处于开发者模式)</p> <ol start="3"><li>再次点击运行，看是否出现可用的手机选项</li></ol> <h3 id="连接ios手机"><a href="#连接ios手机" class="header-anchor">#</a> 连接ios手机</h3> <p>使用usb 将手机连接到电脑上</p> <p>需要安装iTunes</p> <p><a href="https://mydown.yesky.com/pcsoft/33491427/versions/" target="_blank" rel="noopener noreferrer">Windows 64位 itunes下载地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="夜神模拟器"><a href="#夜神模拟器" class="header-anchor">#</a> 夜神模拟器</h3> <ol><li><p>到模拟器的bin目录下，cmd</p></li> <li><p>输入 adb devices</p></li> <li><p>再次点击运行，看是否出现可用的模拟器选项</p></li></ol> <p><a href="https://blog.csdn.net/weixin_45932157/article/details/121112147" target="_blank" rel="noopener noreferrer">HBuilder X 未检测到手机或模拟器-参考<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.1737f577.js" defer></script><script src="/blog/assets/js/2.a89a0639.js" defer></script><script src="/blog/assets/js/9.cd2a009c.js" defer></script>
  </body>
</html>
